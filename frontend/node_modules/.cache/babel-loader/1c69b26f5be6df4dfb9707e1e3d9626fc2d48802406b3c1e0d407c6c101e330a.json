{"ast":null,"code":"var _jsxFileName = \"/home/taurus/Projects/PythonWeb/flask-quick-start/frontend/src/components/PostList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { List, ListItem, ListItemText, Typography, Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst PostList = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [newPost, setNewPost] = useState({\n    title: '',\n    content: ''\n  });\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const fetchPosts = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/posts`);\n      setPosts(response.data);\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n    }\n  };\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n    setNewPost({\n      title: '',\n      content: ''\n    });\n  };\n  const handleSubmit = async () => {\n    try {\n      await axios.post(`${API_URL}/posts`, newPost);\n      handleClose();\n      fetchPosts();\n    } catch (error) {\n      console.error('Error creating post:', error);\n    }\n  };\n  const handleDelete = async postId => {\n    try {\n      await axios.delete(`${API_URL}/posts/${postId}`);\n      fetchPosts();\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"\\u535A\\u5BA2\\u6587\\u7AE0\\u5217\\u8868\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: handleClickOpen,\n      style: {\n        marginBottom: 20\n      },\n      children: \"\\u53D1\\u5E03\\u65B0\\u6587\\u7AE0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(ListItem, {\n        divider: true,\n        children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: post.title,\n          secondary: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              component: \"span\",\n              variant: \"body2\",\n              color: \"textPrimary\",\n              children: [post.content.substring(0, 100), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              component: \"span\",\n              variant: \"caption\",\n              color: \"textSecondary\",\n              children: [\"\\u53D1\\u5E03\\u65F6\\u95F4: \", new Date(post.created_at).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"secondary\",\n          onClick: () => handleDelete(post.id),\n          children: \"\\u5220\\u9664\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)]\n      }, post.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"\\u53D1\\u5E03\\u65B0\\u6587\\u7AE0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          margin: \"dense\",\n          label: \"\\u6807\\u9898\",\n          fullWidth: true,\n          value: newPost.title,\n          onChange: e => setNewPost({\n            ...newPost,\n            title: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          margin: \"dense\",\n          label: \"\\u5185\\u5BB9\",\n          fullWidth: true,\n          multiline: true,\n          rows: 4,\n          value: newPost.content,\n          onChange: e => setNewPost({\n            ...newPost,\n            content: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          color: \"primary\",\n          children: \"\\u53D6\\u6D88\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmit,\n          color: \"primary\",\n          children: \"\\u53D1\\u5E03\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(PostList, \"zpeaqloKTn3A2ITQHFZ5ZFRlfPA=\");\n_c = PostList;\nexport default PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["React","useState","useEffect","List","ListItem","ListItemText","Typography","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","PostList","_s","posts","setPosts","open","setOpen","newPost","setNewPost","title","content","fetchPosts","response","get","data","error","console","handleClickOpen","handleClose","handleSubmit","post","handleDelete","postId","delete","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","onClick","style","marginBottom","map","divider","primary","secondary","component","substring","Date","created_at","toLocaleString","id","onClose","autoFocus","margin","label","fullWidth","value","onChange","e","target","multiline","rows","_c","$RefreshReg$"],"sources":["/home/taurus/Projects/PythonWeb/flask-quick-start/frontend/src/components/PostList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n    List, \n    ListItem, \n    ListItemText, \n    Typography, \n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField\n} from '@mui/material';\nimport axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst PostList = () => {\n    const [posts, setPosts] = useState([]);\n    const [open, setOpen] = useState(false);\n    const [newPost, setNewPost] = useState({ title: '', content: '' });\n\n    useEffect(() => {\n        fetchPosts();\n    }, []);\n\n    const fetchPosts = async () => {\n        try {\n            const response = await axios.get(`${API_URL}/posts`);\n            setPosts(response.data);\n        } catch (error) {\n            console.error('Error fetching posts:', error);\n        }\n    };\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n        setNewPost({ title: '', content: '' });\n    };\n\n    const handleSubmit = async () => {\n        try {\n            await axios.post(`${API_URL}/posts`, newPost);\n            handleClose();\n            fetchPosts();\n        } catch (error) {\n            console.error('Error creating post:', error);\n        }\n    };\n\n    const handleDelete = async (postId) => {\n        try {\n            await axios.delete(`${API_URL}/posts/${postId}`);\n            fetchPosts();\n        } catch (error) {\n            console.error('Error deleting post:', error);\n        }\n    };\n\n    return (\n        <div>\n            <Typography variant=\"h4\" gutterBottom>\n                博客文章列表\n            </Typography>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen} style={{ marginBottom: 20 }}>\n                发布新文章\n            </Button>\n            <List>\n                {posts.map((post) => (\n                    <ListItem key={post.id} divider>\n                        <ListItemText\n                            primary={post.title}\n                            secondary={\n                                <>\n                                    <Typography component=\"span\" variant=\"body2\" color=\"textPrimary\">\n                                        {post.content.substring(0, 100)}...\n                                    </Typography>\n                                    <br />\n                                    <Typography component=\"span\" variant=\"caption\" color=\"textSecondary\">\n                                        发布时间: {new Date(post.created_at).toLocaleString()}\n                                    </Typography>\n                                </>\n                            }\n                        />\n                        <Button \n                            variant=\"outlined\" \n                            color=\"secondary\" \n                            onClick={() => handleDelete(post.id)}\n                        >\n                            删除\n                        </Button>\n                    </ListItem>\n                ))}\n            </List>\n\n            <Dialog open={open} onClose={handleClose}>\n                <DialogTitle>发布新文章</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        label=\"标题\"\n                        fullWidth\n                        value={newPost.title}\n                        onChange={(e) => setNewPost({ ...newPost, title: e.target.value })}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        label=\"内容\"\n                        fullWidth\n                        multiline\n                        rows={4}\n                        value={newPost.content}\n                        onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        取消\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        发布\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default PostList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}